Date.prototype.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"];Date.prototype.getMonthName=function(){return this.monthNames[this.getMonth()]};Date.prototype.getShortMonthName=function(){return this.getMonthName().substr(0,3)};Date.prototype.dayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];Date.prototype.getDayName=function(){return this.dayNames[this.getDay()]};Date.prototype.getShortDayName=function(){return this.getDayName().substr(0,3)};Date.prototype.toMysqlDate=function(){function e(e){return 0<=e&&e<10?"0"+e.toString():-10<e&&e<0?"-0"+(-1*e).toString():e.toString()}return this.getUTCFullYear()+"-"+e(1+this.getUTCMonth())+"-"+e(this.getUTCDate())};(function(e){e.fn.timePicker=function(t){function n(e,t){e=e.replace("shortMonthName",t.getShortMonthName());e=e.replace("monthName",t.getMonthName());e=e.replace("shortDayName",t.getShortDayName());e=e.replace("dayName",t.getDayName());e=e.replace("date",t.getDate());return e}function r(t,r){for(var i=u.datePicker.numOfDates;i>0;i--){var s=e(u.datePicker.date.html);s.addClass(u.datePicker.date.className).attr("data-date",r.getTime()).attr("data-tp-role","datePickerDate").html(n(u.datePicker.date.text,r)).appendTo(t);undefined!==a.selectedDatesArr[r.getTime()]&&s.addClass(u.datePicker.date.selectedClassName);r.setDate(r.getDate()+1);u.datePicker.dates.added.call(e("[data-tp-role=datePickerDate]",t))}}function i(t,r){""!==u.timePicker.wrapper.htmlBefore&&e("[data-tp-role=timePickerHtmlBefore]",t).length===0&&e(u.timePicker.wrapper.htmlBefore).attr("data-tp-role","timePickerHtmlBefore").prependTo(t);var i=e(u.timePicker.time.html);i.addClass(u.timePicker.time.className).attr("data-date",r.getTime()).attr("data-tp-role","timePickerTime").html(n(u.timePicker.time.text,r));e('<input type="hidden" name="'+u.fieldName+"["+r.getTime()+"]["+u.datePicker.date.hiddenFieldName+']" value="'+r.toMysqlDate()+'" />').appendTo(i);var s=e("<select></select>");s.attr("name",u.fieldName+"["+r.getTime()+"]["+u.timePicker.time.selectFieldName+"]").appendTo(i);var o=e.fn.timePicker.createFriendlyTimesArr(u.timePicker.time.startTime,u.timePicker.time.endTime,u.timePicker.time.interval);u.timePicker.showPlaceholders&&e("[data-tp-role=timePickerPlaceholder]:first",t).remove();for(var a in o){var f=e('<option value="'+a+'">'+o[a]+"</option>");o[a]===u.timePicker.time.preSelected&&f.prop("selected","selected");f.appendTo(s)}var l=!1;e("[data-tp-role=timePickerTime]",t).each(function(){if(e(this).attr("data-date")>r.getTime()){i.insertBefore(this);l=!0;return!1}});l||i.appendTo(t);u.timePicker.time.added.call(i)}function s(t){var n=e(u.timePicker.placeholder.html);n.addClass(u.timePicker.placeholder.className).attr("data-tp-role","timePickerPlaceholder").html(u.timePicker.placeholder.text);n.appendTo(t)}function o(t,n){e("[data-date="+n.getTime()+"]",t).remove();e("[data-tp-role=timePickerTime]",t).length===0&&e("[data-tp-role=timePickerHtmlBefore]",t).remove();u.timePicker.showPlaceholders&&s(t);u.timePicker.time.removed.call(t)}var u=e.extend(!0,{},e.fn.timePicker.defaults,t),a={selectedDatesArr:[]};return this.each(function(){var t=e(this).empty(),n=e(u.datePicker.wrapper.html);""!==u.datePicker.wrapper.htmlBefore&&e(u.datePicker.wrapper.htmlBefore).attr("data-tp-role","datePickerHtmlBefore").appendTo(n);n.addClass(u.datePicker.wrapper.className).attr("data-tp-role","datePicker").appendTo(t);var f=e(u.datePicker.prev.html);f.addClass(u.datePicker.prev.className).attr("data-tp-role","datePickerPrev").html(u.datePicker.prev.text).on("click",function(){u.datePicker.prev.clicked.call(e(this));var t=e("[data-tp-role=datePickerDate]:first",n),i=parseInt(t.attr("data-date"),10),s=new Date(i);if(!u.datePicker.allowPastDates&&s.toDateString()===u.datePicker.startDate.toDateString())return!1;if(!u.datePicker.allowPastDates&&s<u.datePicker.startDate)return!1;l.empty();s.setDate(s.getDate()-1);r(l,s);u.datePicker.prev.finished.call(e(this))}).appendTo(n);var l=e(u.datePicker.dates.html);l.addClass(u.datePicker.dates.className).attr("data-tp-role","datePickerDates").on("click","[data-tp-role=datePickerDate]",function(){u.datePicker.date.clicked.call(e(this));var t=0;for(var n in a.selectedDatesArr)t++;var r=e(this),s=parseInt(r.attr("data-date"),10);if(undefined===a.selectedDatesArr[s]){if(t>=u.numberOfTimes)return!1;a.selectedDatesArr[s]=1;i(h,new Date(s))}else{delete a.selectedDatesArr[s];o(h,new Date(s))}u.datePicker.date.addSelectedClassOnClick&&r.toggleClass(u.datePicker.date.selectedClassName);u.datePicker.date.finished.call(e(this))}).appendTo(n);var c=e(u.datePicker.next.html);c.addClass(u.datePicker.next.className).attr("data-tp-role","datePickerNext").html(u.datePicker.next.text).on("click",function(){u.datePicker.next.clicked.call(e(this));var t=e("[data-tp-role=datePickerDate]:first",n),i=parseInt(t.attr("data-date"),10),s=new Date(i);l.empty();s.setDate(s.getDate()+1);r(l,s);u.datePicker.next.finished.call(e(this))}).appendTo(n);var h=e(u.timePicker.wrapper.html);h.addClass(u.timePicker.wrapper.className).attr("data-tp-role","timePicker").appendTo(t);if(u.timePicker.showPlaceholders)for(var p=0;p<3;p++)s(h);r(l,new Date(u.datePicker.startDate.getTime()))})};e.fn.timePicker.defaults={numberOfTimes:3,fieldName:"schedule",datePicker:{startDate:new Date,numOfDates:5,allowPastDates:!1,wrapper:{htmlBefore:'<p class="TPDatePickerHtmlBefore">First, choose three dates:</p>',html:"<div />",className:"TPDatePicker"},prev:{className:"TPDatePickerPrev",html:"<span />",text:"&#9664;",clicked:function(){},finished:function(){}},dates:{className:"TPDatePickerDates",html:"<span />",added:function(){}},date:{className:"TPDatePickerDate",selectedClassName:"selected",addSelectedClassOnClick:!0,hiddenFieldName:"date",html:"<span />",text:"<small>shortMonthName</small> <b>date</b> <small>shortDayName</small>",clicked:function(){},finished:function(){}},next:{className:"TPDatePickerNext",html:"<span />",text:"&#9654;",clicked:function(){},finished:function(){}}},timePicker:{showPlaceholders:!0,wrapper:{htmlBefore:'<p class="TPTimePickerHtmlBefore">Now, please select your available times:</p>',html:"<div />",className:"TPTimePicker"},time:{className:"TPTimePickerTime",preSelected:"7:00am",startTime:"6:00",endTime:"19:00",interval:15,selectFieldName:"time",html:"<span />",text:"<small>shortMonthName</small> <b>date</b> <small>shortDayName</small>",added:function(){},removed:function(){}},placeholder:{html:"<span />",className:"TPTimePickerPlaceholder",text:"<small>Please</small><small>Pick</small> <b>3</b>"}}};e.fn.timePicker.createDateObjFromTime=function(e,t){function n(e){return!isNaN(parseFloat(e))&&isFinite(e)}var r=e.split(":");r[0]=n(r[0])?parseInt(r[0],10):0;r[1]=n(r[1])?parseInt(r[1],10):0;r[2]=n(r[2])?parseInt(r[2],10):0;undefined===t&&(t=new Date);t.setHours(r[0]);t.setMinutes(r[1]);t.setSeconds(r[2]);return t};e.fn.timePicker.createFriendlyTimesArr=function(t,n,r){function i(e){return e.length===1?"0"+e:e}undefined===t&&(t="00:00");var s=e.fn.timePicker.createDateObjFromTime(t),o=e.fn.timePicker.createDateObjFromTime(n),u=[];while(o>=s){var a=i(""+s.getMinutes()),f=s.getHours(),l=i(""+f)+":"+a;f===0?f="12:"+a+"am":f<12?f=f+":"+a+"am":f===12?f="12:"+a+"pm":f=f-12+":"+a+"pm";u[l]=f;s.setTime(s.getTime()+r*60*1e3)}return u}})(jQuery);